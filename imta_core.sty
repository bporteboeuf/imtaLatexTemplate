\NeedsTeXFormat{LaTeX2e}

%%%%%%%%%% PACKAGES %%%%%%%%%%

% Document geometry management
\RequirePackage[a4paper, margin=2cm, top=3cm]{geometry}

% Images management
\RequirePackage{graphicx}

% Floats management
\RequirePackage{float}

% Output font management
\RequirePackage[T1]{fontenc}

% Document encoding management
\RequirePackage[utf8]{inputenc}

% Include external pdf documents
% Used for generating the cover
\RequirePackage{pdfpages}

% Fancy headers and footers
\RequirePackage{fancyhdr}

% Fancy code listings
\RequirePackage{minted}

% Pictures drawing
\RequirePackage{tikz}

% Metadata access
\RequirePackage{titling}

% Arbitrary font size
\RequirePackage{anyfontsize}

% Fancy frames and boxes
\RequirePackage{mdframed}

% Section styling
\RequirePackage{sectsty}



%%%%%%%%%% COLORS %%%%%%%%%%

% The three colors of IMTA: green, light blue, and dark blue
\definecolor{imtaGreen}{RGB}{164, 210, 51}
\definecolor{imtaLightBlue}{RGB}{0, 184, 222}
\definecolor{imtaDarkBlue}{RGB}{12, 35, 64}
\definecolor{imtaGray}{RGB}{87, 87, 87}

% Colors related to code formatting
\definecolor{imtaCodeBackground}{RGB}{245, 245, 245}
\definecolor{imtaInlineCodeBackground}{RGB}{230, 230, 230}



%%%%%%%%%% GENERAL SETTINGS %%%%%%%%%%

\raggedbottom



%%%%%%%%%% PACKAGES SETTINGS %%%%%%%%%%



% graphicx
\setkeys{Gin}{width=\linewidth}


% fancyhdr
\pagestyle{fancy}
\fancyhead{}
\fancyfoot{}
\fancyhead[L]{\thetitle}
\fancyhead[R]{\theauthor}
\fancyfoot[C]{\thepage}

\fancypagestyle{imtaFirstpage}{%
    \fancyhf{}
    \renewcommand{\headrulewidth}{0pt}
}



%%%%%%%%%% COMMANDS %%%%%%%%%%

% \subtitle
% Command for the cover's subtitle
\newcommand{\subtitleValue}{}
\newcommand{\subtitle}[1]{%
    \renewcommand{\subtitleValue}{#1}
}



% \imtaQuestion
% Output "Question" followed by the current question number
% The \imtaQuestionReset command should be called after each new section or subsection,
% in order to resest the question counter
\newcounter{imtaQuestionCounter}
\newcommand{\imtaQuestion}{%
    \stepcounter{imtaQuestionCounter}%
    \subsection*{Question \arabic{imtaQuestionCounter}}%
}

% \imtaQuestionReset
% Reset the question counter
\newcommand{\imtaQuestionReset}{%
    \setcounter{imtaQuestionCounter}{0}%
}

% \imtaMakeCover
% Output the IMTA title page
\newcommand{\imtaMaketitlepage}{%
    \thispagestyle{imtaFirstpage}
    \pagenumbering{gobble}
    \includepdf[pagecommand={%
        \begin{tikzpicture}[remember picture, overlay]
        \node[anchor=west, align=left] at (-0.5, -10.5) {%
            \large\fontfamily{phv}\selectfont\thedate \\
            \large\fontfamily{phv}\selectfont\theauthor \vspace{1.5cm}\\
            \textcolor{imtaGreen}{\fontsize{25}{40}\fontseries{b}\fontfamily{phv}\selectfont\thetitle} \vspace{.5cm}\\
            \textcolor{imtaGreen}{\Large\fontfamily{phv}\selectfont\subtitleValue}
        };
        \end{tikzpicture}
    }]{titlepage}
    \newpage
    \pagenumbering{arabic}
    \setcounter{page}{2}
}

% \imtaSetIMTStyle
% Set a styling that conforms to the official report template
\newcommand{\imtaSetIMTStyle}{%
    % Set global font to Helvetica
    \usepackage{helvet}
    \renewcommand{\familydefault}{\sfdefault}

    % Set heading style
    \sectionfont{\bf\LARGE\color{imtaGreen}}
    \subsectionfont{\bf\Large\color{imtaGray}}
    \subsubsectionfont{\bf\large\color{imtaGray}}
    \paragraphfont{\color{imtaGray}}
    \subparagraphfont{\color{imtaGray}}

    % Set header and footer style
    \pagestyle{fancy}
    \fancyhead{}
    \fancyfoot{}
    \fancyhead[L]{\nouppercase\leftmark}
    \fancyfoot[R]{\thepage}
    \fancypagestyle{imtaFirstpage}{%
        \fancyhf{}
        \renewcommand{\headrulewidth}{0pt}
    }
}



%%%%%%%%%% ENVIRONMENTS %%%%%%%%%% 


